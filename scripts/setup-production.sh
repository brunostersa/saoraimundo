#!/bin/bash

echo "üöÄ CONFIGURA√á√ÉO DO AMBIENTE DE PRODU√á√ÉO - Igreja S√£o Raimundo"
echo "================================================================"
echo ""

echo "üìã PASSO A PASSO PARA CONFIGURAR O BANCO ONLINE:"
echo ""

echo "1Ô∏è‚É£ CRIAR PROJETO NO SUPABASE:"
echo "   ‚Ä¢ Acesse: https://supabase.com"
echo "   ‚Ä¢ Login com GitHub"
echo "   ‚Ä¢ New Project: sao-raimundo-doacoes"
echo "   ‚Ä¢ Escolha regi√£o pr√≥xima (S√£o Paulo)"
echo "   ‚Ä¢ Aguarde cria√ß√£o (pode demorar alguns minutos)"
echo ""

echo "2Ô∏è‚É£ OBTER CONNECTION STRING:"
echo "   ‚Ä¢ No projeto ‚Üí Settings ‚Üí Database"
echo "   ‚Ä¢ Role: postgres"
echo "   ‚Ä¢ Copie a connection string"
echo ""

echo "3Ô∏è‚É£ CONFIGURAR NO VERCEL:"
echo "   ‚Ä¢ Acesse: https://vercel.com"
echo "   ‚Ä¢ Seu projeto ‚Üí Settings ‚Üí Environment Variables"
echo "   ‚Ä¢ Adicione:"
echo "     DATABASE_TYPE = postgres"
echo "     DATABASE_URL = [SUA_CONNECTION_STRING]"
echo "     NODE_ENV = production"
echo ""

echo "4Ô∏è‚É£ FAZER DEPLOY:"
echo "   ‚Ä¢ Commit e push das mudan√ßas"
echo "   ‚Ä¢ O Vercel far√° deploy autom√°tico"
echo ""

echo "5Ô∏è‚É£ VERIFICAR FUNCIONAMENTO:"
echo "   ‚Ä¢ Acesse sua URL do Vercel"
echo "   ‚Ä¢ Teste criar uma doa√ß√£o"
echo "   ‚Ä¢ Verifique se persiste no banco"
echo ""

echo "üéØ CONFIGURA√á√ÉO ATUAL:"
echo "   ‚Ä¢ Local: SQLite (database.db)"
echo "   ‚Ä¢ Produ√ß√£o: PostgreSQL (Supabase)"
echo "   ‚Ä¢ Altern√¢ncia autom√°tica baseada em NODE_ENV"
echo ""

echo "‚úÖ AP√ìS CONFIGURAR, O SISTEMA FUNCIONAR√Å:"
echo "   ‚Ä¢ Localmente com SQLite"
echo "   ‚Ä¢ Online com PostgreSQL"
echo "   ‚Ä¢ Dados persistentes e confi√°veis"
echo ""

echo "üîß ARQUIVOS IMPORTANTES:"
echo "   ‚Ä¢ src/lib/database-config.ts - Configura√ß√£o do banco"
echo "   ‚Ä¢ src/lib/database-postgres.ts - Conex√£o PostgreSQL"
echo "   ‚Ä¢ src/lib/database-sqlite.ts - Conex√£o SQLite"
echo "   ‚Ä¢ vercel.json - Configura√ß√£o do Vercel"
echo ""

echo "üìû PRECISA DE AJUDA?"
echo "   ‚Ä¢ Verifique os logs do Vercel"
echo "   ‚Ä¢ Teste a conex√£o localmente primeiro"
echo "   ‚Ä¢ Use o endpoint /api/test-connection para testar"
echo ""
